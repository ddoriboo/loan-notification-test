# 📋 알림 메시지 분석 및 AI 생성 시스템 PRD

## 📑 문서 정보
- **문서 버전**: v1.0
- **작성일**: 2025-01-05
- **프로젝트명**: Smart Notification Message Analyzer & AI Generator
- **목적**: CSV 기반 알림 메시지 성과 분석 및 AI 메시지 생성 시스템

---

## 🎯 1. 프로젝트 개요

### 1.1 비즈니스 문제
- **현재 상황**: 금융 서비스(대출) 알림 메시지의 성과 분석이 수동적이고 비효율적
- **핵심 이슈**: 
  - 어떤 메시지가 실제로 효과적인지 정량적 분석 부족
  - 새로운 메시지 작성 시 데이터 기반 가이드라인 부재
  - 동일 메시지의 반복 발송 성과를 종합적으로 파악하기 어려움
  - 시간대별, 서비스별 최적화 인사이트 부족

### 1.2 솔루션 개요
CSV 파일 업로드를 통해 기존 알림 메시지 성과를 종합 분석하고, AI를 활용하여 데이터 기반의 최적화된 새로운 메시지를 생성하는 웹 기반 분석 도구

### 1.3 핵심 가치 제안
- **데이터 드리븐**: 실제 클릭률 데이터 기반 분석
- **AI 기반 생성**: OpenAI GPT-4o를 활용한 지능형 메시지 생성
- **즉시 활용**: 별도 설치 없는 웹 기반 도구
- **포괄적 분석**: 메시지, 키워드, 시간, 서비스별 다각도 분석

---

## 🎯 2. 비즈니스 목표 및 성공 지표

### 2.1 비즈니스 목표
1. **성과 향상**: 알림 메시지 평균 클릭률 20% 이상 개선
2. **효율성 증대**: 메시지 기획 시간 50% 단축
3. **데이터 활용**: 기존 성과 데이터의 체계적 활용
4. **의사결정 지원**: 데이터 기반 마케팅 전략 수립

### 2.2 성공 지표 (KPI)
- **정량적 지표**:
  - 시스템 사용 후 생성된 메시지의 평균 클릭률
  - 고성과 메시지(8% 이상) 생성 비율
  - 사용자당 월평균 분석 횟수
  - AI 생성 메시지 채택률

- **정성적 지표**:
  - 사용자 만족도 (NPS 점수)
  - 메시지 기획팀 업무 효율성 체감도
  - 데이터 기반 의사결정 증가율

---

## 👥 3. 사용자 페르소나 및 시나리오

### 3.1 Primary Persona: 마케팅 매니저 (김마케, 32세)
- **배경**: 금융서비스 마케팅팀 3년차, 알림 메시지 기획 담당
- **목표**: 효과적인 알림 메시지 작성으로 고객 참여율 향상
- **Pain Points**: 
  - 어떤 메시지가 효과적인지 감에 의존
  - A/B 테스트 결과 분석이 복잡하고 시간 소모적
  - 새로운 메시지 아이디어 고갈
- **기대 효과**: 데이터 기반으로 검증된 메시지 패턴 파악 및 새로운 아이디어 획득

### 3.2 Secondary Persona: 데이터 분석가 (박분석, 28세)
- **배경**: 마케팅 데이터팀 2년차, 캠페인 성과 분석 담당
- **목표**: 마케팅팀에 실용적인 인사이트 제공
- **Pain Points**:
  - 복잡한 SQL 쿼리와 시각화 도구 사용의 번거로움
  - 비기술직과의 소통에서 발생하는 인사이트 전달의 어려움
- **기대 효과**: 자동화된 분석과 자연어 인사이트로 업무 효율성 향상

### 3.3 사용자 시나리오

**시나리오 1: 월간 성과 분석**
```
김마케가 지난 달 발송한 100개의 알림 메시지 성과를 분석하려고 함
1. CSV 파일 (메시지, 클릭률, 발송일, 서비스명 포함) 업로드
2. 자동 분석 완료 후 대시보드에서 전체 성과 확인
3. 고성과 메시지 탭에서 클릭률 12% 이상 메시지 15개 식별
4. 키워드 분석에서 "즉시", "한정" 키워드가 효과적임을 확인
5. 인사이트 리포트에서 "목요일 발송이 가장 효과적" 등 실용적 가이드라인 획득
```

**시나리오 2: 새로운 메시지 생성**
```
김마케가 주택담보대출 상품의 새로운 알림 메시지를 기획해야 함
1. 기존 분석 데이터를 바탕으로 메시지 생성 탭 접근
2. "주택담보대출 금리 인하 혜택 안내" 요청사항 입력
3. AI가 기존 고성과 패턴을 분석하여 3가지 스타일의 메시지 생성
4. 각 메시지의 예상 클릭률과 근거 확인
5. 가장 높은 예상 클릭률(14.2%)의 메시지 선택하여 활용
```

---

## 🔧 4. 기능 요구사항

### 4.1 Core Features

#### 4.1.1 CSV 업로드 및 분석 엔진
**기능 설명**: 사용자의 CSV 파일을 업로드받아 메모리 기반으로 즉시 분석

**상세 요구사항**:
- **입력 형식**: CSV 파일 (드래그앤드롭 또는 파일 선택)
- **필수 컬럼**: 발송 문구, 클릭율, 서비스명, 발송일, 요일
- **선택 컬럼**: 발송회원수, 클릭회원수
- **지원 인코딩**: UTF-8, EUC-KR
- **최대 파일 크기**: 10MB
- **최대 레코드 수**: 10,000개

**처리 로직**:
```python
1. CSV 파싱 및 필드명 정규화
2. 데이터 타입 변환 (클릭률 → float, 날짜 → datetime)
3. 결측값 처리 (기본값 설정)
4. 데이터 검증 (클릭률 범위, 날짜 형식 등)
5. 메모리 내 저장 및 분석 준비
```

**예외 처리**:
- 잘못된 파일 형식: 명확한 오류 메시지 및 샘플 형식 제공
- 필수 컬럼 누락: 누락된 컬럼명 명시 및 매핑 가이드 제공
- 데이터 품질 이슈: 문제가 있는 행 번호와 구체적 오류 내용 표시

#### 4.1.2 고성과 메시지 분석 및 집계
**기능 설명**: 효과적인 메시지를 식별하고 동일 문구의 성과를 집계 분석

**고성과 기준**:
- **동적 임계값**: 전체 평균 클릭률의 120% 이상
- **최소 임계값**: 8% 이상 (업계 표준)
- **상위 비율**: 전체 메시지의 상위 20%
- **최소 후보수**: 10개 이상

**집계 로직**:
```python
동일_문구_그룹 = {
    "message": "메시지 텍스트",
    "send_count": 발송_횟수,
    "total_sends": 총_발송_회원수,
    "total_clicks": 총_클릭_수,
    "avg_click_rate": 평균_클릭률,
    "max_click_rate": 최고_클릭률,
    "total_click_rate": 전체_기준_클릭률,
    "services": [관련_서비스_목록],
    "date_range": {"first": 최초_발송일, "last": 최근_발송일}
}
```

**표시 우선순위**: total_click_rate 기준 내림차순

#### 4.1.3 다차원 성과 분석
**기능 설명**: 키워드, 서비스, 시간대별 성과 패턴 분석

**키워드 분석**:
- **분석 대상**: ["혜택", "최대", "할인", "금리", "한도", "대출", "비교", "갈아타기", "확인", "신청", "특별", "즉시", "마감"]
- **분석 지표**: 평균 클릭률, 사용 빈도, 효과도 점수
- **시각화**: 색상 코딩 (🟢 12%+, 🟡 8-12%, 🔴 8% 미만)

**서비스별 분석**:
- **그룹화**: 서비스명 기준
- **집계 지표**: 평균 클릭률, 메시지 수, 최고/최저 성과 메시지
- **상위 메시지**: 서비스별 상위 5개 메시지 표시

**시간대 분석**:
- **분석 단위**: 요일별 (월~일)
- **집계 지표**: 평균 클릭률, 발송 건수
- **최적 타이밍**: 최고 성과 요일 및 권장 발송 시점

#### 4.1.4 AI 기반 메시지 생성
**기능 설명**: OpenAI GPT-4o를 활용하여 데이터 기반 최적화된 메시지 생성

**입력 파라미터**:
- **요청사항**: 자유 텍스트 (최대 500자)
- **타겟 서비스**: 드롭다운 선택 (분석된 서비스 목록)
- **대상 고객**: 직장인, 프리랜서, 개인사업자, 주부 등
- **톤앤매너**: promotional, friendly, urgent, professional

**생성 로직**:
```python
1. 업로드된 데이터에서 고성과 패턴 추출
2. 효과적인 키워드 및 문구 구조 분석
3. 사용자 요청사항과 데이터 패턴 결합
4. GPT-4o API 호출하여 3가지 스타일 메시지 생성
5. 각 메시지별 예상 클릭률 및 근거 제공
```

**출력 형식**:
```json
{
  "style": "데이터 기반 혜택형",
  "message": "(광고) 고객님만을 위한 특별 대출 혜택! 지금 확인하고 최대 한도 받으세요",
  "predicted_rate": 12.3,
  "reasoning": "효과적인 '특별', '최대' 키워드 활용. 유사 패턴 평균 클릭률 11.8%",
  "confidence": 88
}
```

#### 4.1.5 자연어 인사이트 리포트
**기능 설명**: AI가 분석 결과를 자연어로 해석하여 실용적 인사이트 제공

**인사이트 카테고리**:
1. **📊 전체 성과 개요**: 전반적인 성과 수준 및 분포
2. **🏷️ 서비스별 성과**: 최고/최저 성과 서비스 및 개선 방향
3. **🔑 효과적인 키워드**: 고성과 키워드 및 활용 가이드
4. **📅 요일별 성과**: 최적 발송 타이밍 및 패턴
5. **🏆 고성과 메시지 패턴**: 반복 사용된 검증 메시지 분석
6. **💡 개선 제안**: 구체적이고 실행 가능한 개선 방안

**생성 로직**:
```python
1. 정량적 데이터 추출 및 통계 계산
2. 패턴 식별 (최고/최저, 트렌드, 이상값)
3. 비즈니스 맥락과 결합한 해석
4. 구체적 수치와 함께 자연어 서술
5. 실행 가능한 권장사항 도출
```

### 4.2 사용자 인터페이스 요구사항

#### 4.2.1 탭 기반 네비게이션
- **탭 구성**: 분석요약, 고성과메시지, 키워드분석, 서비스별분석, 인사이트리포트, 문구생성
- **스마트 요약**: 다른 탭 접근시 상단에 핵심 지표 요약 표시
- **상황별 표시**: 탭 내용에 따른 관련 정보 및 가이드 제공

#### 4.2.2 반응형 디자인
- **모바일 최적화**: 768px 이하에서 스택 레이아웃
- **태블릿 지원**: 768px-1024px 그리드 조정
- **데스크톱 최적화**: 1200px 이상 풀 기능 활용

#### 4.2.3 시각화 요구사항
- **차트 유형**: 바 차트, 도넛 차트, 진행률 바
- **색상 시스템**: 성과 기반 색상 코딩 (Green-Yellow-Red)
- **인터랙션**: 호버 효과, 클릭 상세 정보
- **접근성**: WCAG 2.1 AA 준수

---

## ⚙️ 5. 기술적 요구사항

### 5.1 시스템 아키텍처
```
[Frontend] → [Python HTTP Server] → [CSV Analyzer] → [OpenAI API]
    ↓              ↓                      ↓              ↓
[HTML/JS/CSS] [upload_web_server.py] [upload_analyzer.py] [GPT-4o]
```

### 5.2 백엔드 요구사항

#### 5.2.1 Python 서버
- **기반 라이브러리**: `http.server` (표준 라이브러리)
- **핵심 모듈**:
  ```python
  - csv: CSV 파싱
  - json: API 응답 처리
  - datetime: 날짜 처리
  - statistics: 통계 계산
  - openai: AI API 연동
  ```

#### 5.2.2 메모리 기반 처리
- **데이터 저장**: 파일 시스템 의존성 없음
- **세션 관리**: 메모리 내 전역 인스턴스
- **동시성**: 단일 스레드 (동시 사용자 고려시 확장 필요)

#### 5.2.3 API 엔드포인트
```python
POST /api/upload-csv    # CSV 업로드 및 분석
POST /api/dashboard     # 대시보드 데이터 조회
POST /api/generate      # AI 메시지 생성
POST /api/insights      # 자연어 인사이트 생성
```

### 5.3 프론트엔드 요구사항

#### 5.3.1 기술 스택
- **HTML5**: 시맨틱 마크업
- **CSS3**: Flexbox, Grid, CSS Variables
- **Vanilla JavaScript**: ES6+ 문법, async/await
- **폰트**: 시스템 폰트 + Noto Sans KR (한글 최적화)

#### 5.3.2 상태 관리
```javascript
// 전역 상태 객체
let analysisData = {
    summary: {},
    high_performance_messages: [],
    aggregated_high_performance: [],
    keyword_analysis: {},
    service_analysis: {},
    time_analysis: {}
};
```

#### 5.3.3 에러 처리
- **네트워크 오류**: 재시도 버튼 및 명확한 오류 메시지
- **데이터 오류**: 구체적인 문제점 및 해결 가이드
- **API 오류**: 서버 응답 기반 사용자 친화적 메시지

### 5.4 외부 API 연동

#### 5.4.1 OpenAI API
- **모델**: gpt-4o-2024-11-20
- **용도**: 메시지 생성, 인사이트 생성
- **에러 처리**: API 실패시 데이터 기반 시뮬레이션으로 fallback
- **보안**: 환경변수 또는 설정 파일을 통한 API 키 관리

---

## 🔒 6. 보안 요구사항

### 6.1 데이터 보안
- **업로드 파일**: 메모리 처리 후 즉시 삭제
- **개인정보**: 메시지 텍스트 외 개인식별정보 처리 금지
- **API 키**: 환경변수 또는 암호화된 설정 파일 사용

### 6.2 입력 검증
- **파일 타입**: CSV만 허용
- **파일 크기**: 10MB 제한
- **내용 검증**: SQL Injection, XSS 방지를 위한 입력 sanitization

### 6.3 네트워크 보안
- **HTTPS**: 프로덕션 환경에서 필수
- **CORS**: 적절한 Origin 제한
- **Rate Limiting**: API 호출 제한 (OpenAI API 보호)

---

## 📊 7. 성능 요구사항

### 7.1 응답 시간
- **CSV 업로드**: 1,000건 기준 3초 이내
- **대시보드 로딩**: 2초 이내
- **AI 메시지 생성**: 15초 이내
- **인사이트 생성**: 20초 이내

### 7.2 처리 용량
- **동시 사용자**: 10명 (현재 아키텍처 기준)
- **최대 CSV 크기**: 10MB (약 50,000행)
- **메모리 사용량**: 500MB 이하

### 7.3 가용성
- **Uptime**: 99% 이상
- **장애 복구**: 5분 이내

---

## 🎨 8. UI/UX 가이드라인

### 8.1 디자인 시스템

#### 8.1.1 색상 팔레트
```css
Primary: #667eea (파란색 - 신뢰감)
Success: #28a745 (녹색 - 고성과)
Warning: #ffc107 (노란색 - 주의)
Danger: #dc3545 (빨간색 - 위험)
Gray: #6c757d (회색 - 보조)
Background: #f8f9fa (밝은 회색)
```

#### 8.1.2 타이포그래피
```css
Heading 1: 2.2em, Bold
Heading 2: 1.8em, Semi-bold
Heading 3: 1.4em, Semi-bold
Body: 1em, Regular
Caption: 0.9em, Regular
```

#### 8.1.3 컴포넌트 스타일
- **카드**: 둥근 모서리(12px), 그림자 효과
- **버튼**: 8px 둥근 모서리, 호버 효과
- **입력 필드**: 8px 둥근 모서리, 포커스 상태
- **차트**: 애니메이션 효과, 색상 코딩

### 8.2 사용성 원칙

#### 8.2.1 직관성
- **명확한 아이콘**: 📊📈🔑🏷️📝✨ 등 직관적 이모지 활용
- **일관된 레이아웃**: 탭별 동일한 구조
- **예측 가능한 동작**: 표준 웹 패턴 준수

#### 8.2.2 효율성
- **빠른 접근**: 핵심 기능 3클릭 이내 접근
- **스마트 기본값**: 사용자 설정 기억
- **배치 처리**: 여러 작업 동시 수행

#### 8.2.3 접근성
- **키보드 네비게이션**: 모든 기능 키보드로 접근 가능
- **색상 독립적**: 색상 외에도 아이콘, 텍스트로 정보 전달
- **스크린 리더**: 적절한 ARIA 라벨 및 시맨틱 HTML

---

## 📋 9. 데이터 요구사항

### 9.1 입력 데이터 스키마
```csv
서비스명,클릭율,발송 문구,발송일,요일,발송회원수,클릭회원수
신용대출,12.5,"(광고) 특별 혜택 대출 확인하세요",2025-01-01,수,1000,125
주택담보대출,8.3,"(광고) 주택담보대출 금리 비교",2025-01-02,목,1500,124
```

### 9.2 필수 컬럼 정의
- **서비스명** (string): 대출 상품 또는 서비스 이름
- **클릭율** (float): 0-100 범위의 클릭률
- **발송 문구** (string): 실제 발송된 알림 메시지
- **발송일** (date): YYYY-MM-DD 형식의 발송 날짜
- **요일** (string): 월,화,수,목,금,토,일

### 9.3 선택 컬럼 정의
- **발송회원수** (integer): 메시지를 받은 총 회원 수
- **클릭회원수** (integer): 실제 클릭한 회원 수

### 9.4 데이터 검증 규칙
```python
validation_rules = {
    "클릭율": {"min": 0, "max": 100, "type": "float"},
    "발송일": {"format": "YYYY-MM-DD", "range": "2020-01-01 ~ today"},
    "발송 문구": {"min_length": 5, "max_length": 200},
    "서비스명": {"not_null": True, "max_length": 50}
}
```

---

## 🚀 10. 구현 우선순위

### 10.1 Phase 1: MVP (핵심 기능)
**기간**: 2주
- ✅ CSV 업로드 및 기본 분석
- ✅ 고성과 메시지 식별
- ✅ 기본 대시보드 (요약, 메시지)
- ✅ 간단한 키워드 분석

### 10.2 Phase 2: AI 기능 (현재 완료)
**기간**: 1주
- ✅ OpenAI API 연동
- ✅ AI 메시지 생성 기능
- ✅ 데이터 기반 프롬프트 엔지니어링

### 10.3 Phase 3: 고도화 (현재 완료)
**기간**: 1주
- ✅ 동일 문구 집계 기능
- ✅ 자연어 인사이트 리포트
- ✅ 고성과 기준 명시
- ✅ 탭별 스마트 네비게이션

### 10.4 Phase 4: 최적화 (향후 개발)
**기간**: 1주
- 🔄 성능 최적화 (대용량 파일 처리)
- 🔄 다중 사용자 지원
- 🔄 데이터 내보내기 기능
- 🔄 히스토리 관리

---

## 🔮 11. 향후 로드맵

### 11.1 단기 개선사항 (1-3개월)
- **A/B 테스트 지원**: 여러 메시지 변형 성과 비교
- **실시간 분석**: 웹소켓 기반 실시간 데이터 업데이트
- **고급 필터링**: 날짜 범위, 서비스별 세부 필터
- **메시지 템플릿**: 업계별 검증된 메시지 템플릿 제공

### 11.2 중기 확장 (3-6개월)
- **머신러닝 모델**: 자체 클릭률 예측 모델 개발
- **다채널 지원**: SMS, 푸시, 이메일 등 다양한 채널 분석
- **API 제공**: 외부 시스템 연동을 위한 RESTful API
- **팀 협업**: 사용자 권한 관리, 프로젝트 공유 기능

### 11.3 장기 비전 (6개월+)
- **산업 특화**: 금융, 커머스, 게임 등 산업별 특화 분석
- **글로벌 확장**: 다국어 지원, 지역별 최적화
- **통합 플랫폼**: CRM, 마케팅 자동화 도구와 통합
- **AI 에이전트**: 자동화된 메시지 최적화 및 발송 제안

---

## 📋 12. 개발 체크리스트

### 12.1 백엔드 개발 체크리스트
```
[✅] CSV 파일 업로드 및 파싱 구현
[✅] 데이터 검증 및 정규화 로직
[✅] 고성과 메시지 식별 알고리즘
[✅] 키워드/서비스/시간 분석 엔진
[✅] OpenAI API 연동 및 프롬프트 엔지니어링
[✅] 자연어 인사이트 생성 로직
[✅] 에러 처리 및 예외 상황 대응
[✅] API 엔드포인트 구현
[✅] 메모리 최적화 및 성능 튜닝
[✅] 동일 문구 집계 알고리즘
```

### 12.2 프론트엔드 개발 체크리스트
```
[✅] 반응형 레이아웃 구현
[✅] 파일 업로드 UI (드래그앤드롭)
[✅] 탭 기반 네비게이션 시스템
[✅] 데이터 시각화 (차트, 그래프)
[✅] 로딩 상태 및 에러 처리
[✅] AI 메시지 생성 인터페이스
[✅] 인사이트 리포트 표시
[✅] 스마트 요약 오버레이
[✅] 접근성 준수 (WCAG 2.1)
[✅] 크로스 브라우저 호환성
```

### 12.3 품질 보증 체크리스트
```
[✅] 유닛 테스트 (핵심 분석 로직)
[✅] 통합 테스트 (API 엔드포인트)
[✅] 사용성 테스트 (실제 사용자)
[✅] 성능 테스트 (대용량 데이터)
[✅] 보안 테스트 (입력 검증, XSS 방지)
[✅] 브라우저 호환성 테스트
[🔄] 부하 테스트 (동시 사용자)
[🔄] 접근성 테스트 (스크린 리더)
```

---

## 📞 13. 기술 지원 및 문서화

### 13.1 사용자 가이드
- **시작하기**: CSV 형식 가이드 및 샘플 파일
- **기능별 사용법**: 각 탭의 상세 활용 방법
- **FAQ**: 자주 묻는 질문 및 해결책
- **베스트 프랙티스**: 효과적인 분석을 위한 팁

### 13.2 개발자 문서
- **API 레퍼런스**: 엔드포인트별 상세 스펙
- **아키텍처 가이드**: 시스템 구조 및 데이터 플로우
- **확장 가이드**: 새로운 기능 추가 방법
- **배포 가이드**: 환경별 배포 절차

### 13.3 운영 가이드
- **모니터링**: 성능 지표 및 알람 설정
- **백업**: 설정 및 로그 백업 절차
- **장애 대응**: 일반적인 문제 해결 방법
- **업데이트**: 버전 업그레이드 절차

---

## 🎯 결론

이 PRD는 CSV 기반 알림 메시지 분석 및 AI 생성 시스템의 완전한 구현 가이드를 제공합니다. 현재 구현된 모든 기능들이 체계적으로 정리되어 있으며, 향후 확장 가능성까지 고려한 포괄적인 문서입니다.

**핵심 성공 요소**:
1. **데이터 중심**: 실제 성과 데이터에 기반한 분석
2. **AI 활용**: OpenAI를 통한 지능형 메시지 생성
3. **사용자 경험**: 직관적이고 효율적인 인터페이스
4. **확장성**: 향후 기능 추가를 고려한 모듈형 설계

이 문서는 유사한 데이터 분석 도구나 AI 기반 콘텐츠 생성 시스템을 개발할 때 Product Requirement Prompt로 활용할 수 있도록 구체적이고 실무적인 내용으로 구성되었습니다.